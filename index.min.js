function MinMap(t,i){this._center=i.center,this._zoom=i.zoom,this._tileUrl=i.tileUrl,this._subdomains=i.subdomains||"0123",this._size=i.size||[t.offsetWidth,t.offsetHeight],t.style.position="relative",t.style.overflow="hidden",this._R=6378137,this._MAX_LATITUDE=85.0511287798,this.container=t,this._removed=!1;for(var o=this._lngLatToPoint(this._center,this._zoom),e=[this._size[0]/2,this._size[1]/2],s=[(o[0]-e[0])/256,(o[1]-e[1])/256].map(Math.floor),n=[(o[0]+e[0])/256,(o[1]+e[1])/256].map(Math.ceil),r=[s[0]+Math.floor((n[0]-1-s[0])/2),s[1]+Math.floor((n[1]-1-s[1])/2)],h=[],a=s[1];a<n[1];a++)for(var l=s[0];l<n[0];l++)h.push([l,a]);const p=this._distance;h.sort(function(t,i){return p(t,r)-p(i,r)}),h.forEach(function(i){var s=this,n=document.createElement("img");n.style.position="absolute",n.style.left=Math.floor(e[0]+256*i[0]-o[0])+"px",n.style.top=Math.floor(e[1]+256*i[1]-o[1])+"px",n.style.width="256px",n.style.height="256px",n.onload=function(){s._removed||t.appendChild(n)},n.src=this._getUrl(i[0],i[1])},this)}MinMap.prototype.remove=function(){for(var t;t=this.container.firstChild;)this.container.removeChild(t);this._removed=!0},MinMap.prototype._distance=function(t,i){return Math.sqrt((t[0]-i[0])*(t[0]-i[0])+(t[1]-i[1])*(t[1]-i[1]))},MinMap.prototype._getUrl=function(t,i){return this._tileUrl.replace("{s}",this._getSubdomains(t,i)).replace("{x}",t).replace("{y}",i).replace("{z}",this._zoom)},MinMap.prototype._getSubdomains=function(t,i){return this._subdomains[Math.abs(t+i)%this._subdomains.length]},MinMap.prototype._lngLatToPoint=function(t,i){var o=this._project(t),e=256*Math.pow(2,i),s=.5/(Math.PI*this._R);return o[0]=e*(s*o[0]+.5),o[1]=e*(-s*o[1]+.5),o},MinMap.prototype._project=function(t){var i=Math.PI/180,o=Math.max(Math.min(this._MAX_LATITUDE,t[1]),-this._MAX_LATITUDE),e=Math.sin(o*i);return[this._R*t[0]*i,this._R*Math.log((1+e)/(1-e))/2]};